<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[FrozenMoon]]></title>
  <subtitle><![CDATA[game,cat]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://frozenmoon.github.io/"/>
  <updated>2015-08-04T08:41:44.159Z</updated>
  <id>http://frozenmoon.github.io/</id>
  
  <author>
    <name><![CDATA[FrozenMoon]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[UI编辑器优化]]></title>
    <link href="http://frozenmoon.github.io/2015/07/21/ui%E7%BC%96%E8%BE%91%E5%99%A8%E4%BC%98%E5%8C%96/"/>
    <id>http://frozenmoon.github.io/2015/07/21/ui编辑器优化/</id>
    <published>2015-07-21T09:20:43.000Z</published>
    <updated>2015-08-04T08:41:44.159Z</updated>
    <content type="html"><![CDATA[<h2 id="说点什么吧">说点什么吧</h2><pre><code>最近项目也挺忙的，一直想抽时间来改改我们项目的ui编辑器，只能用挤出来的时间来做了。
</code></pre><a id="more"></a>
<hr>
<h2 id="改造目的">改造目的</h2><ul>
<li>提高开发效率</li>
<li>在尽可能少改动的前提下，解决热点需求即可</li>
</ul>
<hr>
<h2 id="ui编辑器简介">ui编辑器简介</h2><p>   年纪大概6，7年了吧。应该在出生后就没怎么改进过。MFC写的DLL，嵌入到游戏客户端中使用。<br>   好在有MFC基础，代码看起来挺亲切的:D<br>   需求完全是靠自己去想，平时用的时候有什么不爽的地方重要可以改掉，也可以过过PM的瘾。</p>
<hr>
<h2 id="改造点">改造点</h2><ol>
<li><p>界面布局调整</p>
</li>
<li><p>ui列表界面：根据首字母进行排序显示，搜索功能</p>
</li>
<li><p>新建ui窗口流程简化： 一键生成，默认模版（对应的：一键删除）</p>
</li>
<li><p>新建控件优化：默认控件模版</p>
</li>
<li><p>编辑器模式下控件默认可拖动</p>
</li>
<li><p>主窗口的相对位置</p>
</li>
</ol>
<hr>
<h2 id="解决方案">解决方案</h2><p>1.ui列表界面：原来的设计只是简单的读取ui列表，放入ListView中</p>
<ul>
<li><p>痛点：列表显示非常杂乱，且没有排序规则</p>
<blockquote>
<p>根据首字母进行排序：CListView.SortItem 搞定。</p>
</blockquote>
</li>
<li><p>痛点：没有搜索功能，要查找某个ui的时候只能靠人肉！</p>
<blockquote>
<p>搜索优化：最初的想法是加入一个edit，在输入变化的时候自动选中对应的item项。但是在尝试做了之后发现几个问题：<br>ListView的选中功能实在太弱，并且需要具有焦点的时候才能选中（有总是选中的属性，但是不符合需求），尝试未果之后考虑有没有其他的方式。<br>最后决定用动态删减ListViewItem的方式来解决这个问题：每次输入变化的时候，清空ListView，遍历ui列表，insert符合要求的ui。</p>
</blockquote>
</li>
<li><p>痛点：由于加入搜索功能，dlg打开的时候焦点默认给到edit：</p>
<blockquote>
<p>细节更闪亮:D</p>
</blockquote>
</li>
</ul>
<p>2.新建窗口</p>
<ul>
<li><p>痛点：之前添加一个ui非常麻烦，要手动添加很多东西，而且是程序自己来干这个事情，费时费力。</p>
<blockquote>
<p>在编辑器提供一键创建窗口，可以让策划或者ui设计师来制作ui。<br>基本都是字符串和文件操作，由于原有的体系比较繁杂，有部分硬编码，健壮性稍差。</p>
</blockquote>
</li>
<li><p>痛点：既然有生成就要对应删除</p>
<blockquote>
<p>就是生成过程的反过程，编码比较“硬”，纯属体力活了。</p>
</blockquote>
</li>
</ul>
<p>3.新建控件默认模版：</p>
<ul>
<li>痛点1：创建后没有默认参数！比如创建一个按钮，还有手动去改大小，图片，颜色等，非常麻烦。<blockquote>
<p>给各个控件配置默认的模版参数，这样只需要稍做修改就能完成需求。（每种控件都对应一个配置lua脚本）</p>
</blockquote>
</li>
</ul>
<p>4.可拖动控件</p>
<ul>
<li>痛点：不能拖动控件的编辑器怎么能叫编辑器！我们之前还用了好几年ORZ。<blockquote>
<p>当用编辑器打开窗口后，设置控件的可移动属性为true即可。问题在于我们的ui控件都是自己写的一套，所以有些控件并不支持窗口的移动。<br>只能改动各种控件的消息处理代码了。</p>
</blockquote>
</li>
</ul>
<p>5.窗口的动态停靠位置（Dock）</p>
<ul>
<li>痛点：以前我们客户端的窗口大小是固定4个模式的，不同模式下的窗口位置定义都是写死的！大约1年前，改成了客户端可以自由改变大小，但编辑器没有对应的更新。<blockquote>
<p>编辑器可改变DockType，x,y 的偏移量。做到所见即所得。</p>
</blockquote>
</li>
</ul>
<p>n.其他细节</p>
<ul>
<li>打开ui后，控件树默认展开Main项。</li>
<li>处理了发现的遗留的bug</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="说点什么吧">说点什么吧</h2><pre><code>最近项目也挺忙的，一直想抽时间来改改我们项目的ui编辑器，只能用挤出来的时间来做了。
</code></pre>]]>
    
    </summary>
    
      <category term="program" scheme="http://frozenmoon.github.io/tags/program/"/>
    
      <category term="work" scheme="http://frozenmoon.github.io/tags/work/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[hexo 使用之路]]></title>
    <link href="http://frozenmoon.github.io/2015/05/11/%E8%AF%BB%E8%AF%BB%E5%86%99%E5%86%99/"/>
    <id>http://frozenmoon.github.io/2015/05/11/读读写写/</id>
    <published>2015-05-11T11:20:43.000Z</published>
    <updated>2015-07-21T10:19:55.127Z</updated>
    <content type="html"><![CDATA[<p>记录使用hexo的技巧</p>
<a id="more"></a>
<h2 id="图片">图片</h2><p><img src="images/cat.jpg" alt=""></p>
<hr>
]]></content>
    <summary type="html">
    <![CDATA[<p>记录使用hexo的技巧</p>]]>
    
    </summary>
    
      <category term="hexo" scheme="http://frozenmoon.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello  World]]></title>
    <link href="http://frozenmoon.github.io/2015/05/11/hello-world/"/>
    <id>http://frozenmoon.github.io/2015/05/11/hello-world/</id>
    <published>2015-05-11T09:20:43.000Z</published>
    <updated>2015-05-11T11:24:20.868Z</updated>
    <content type="html"><![CDATA[<p>4个月前用hexo部署了自己的第一个博客，期间一直忙着项目（lan）。<br>现在终于可以开始了。<br>最近想做的太多，但做的太少，这里希望是一个好的开始。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>4个月前用hexo部署了自己的第一个博客，期间一直忙着项目（lan）。<br>现在终于可以开始了。<br>最近想做的太多，但做的太少，这里希望是一个好的开始。</p>
]]>
    </summary>
    
      <category term="mix" scheme="http://frozenmoon.github.io/tags/mix/"/>
    
  </entry>
  
</feed>